(this["webpackJsonproast-tool"]=this["webpackJsonproast-tool"]||[]).push([[0],{20:function(e,t,n){},22:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(13),i=n.n(a),o=(n(20),n(10)),s=n.n(o),l=n(14),u=n(15),j=n(8),d=n(11),b=n(12),p=n(2),m=(n(22),n(0)),f=function(e){var t=Math.round(e)%60,n=Math.floor(e/60);return"".concat(Math.round(n).toString().padStart(2,"0"),":").concat(Math.round(t).toString().padStart(2,"0"))},h=function(e){var t=e.split(":").map(Number),n=Object(p.a)(t,2);return 60*n[0]+n[1]};function O(e){return new Promise((function(t,n){var c=new FileReader;c.readAsDataURL(e),c.onload=function(){return t(c.result)},c.onerror=function(e){return n(e)}}))}var x=300,v=500,y=10,w=x/260,S=["Time","Temperature","Rate of Rise"];var k=function(){var e=Object(c.useState)(),t=Object(p.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(),i=Object(p.a)(a,2),o=i[0],k=i[1],g=Object(c.useState)(!1),T=Object(p.a)(g,2),C=T[0],M=T[1],N=Object(c.useState)([]),D=Object(p.a)(N,2),F=D[0],A=D[1],E=Object(c.useState)(),R=Object(p.a)(E,2),P=R[0],V=R[1],I=Object(c.useState)(),L=Object(p.a)(I,2),z=L[0],B=L[1],U=function(e,t,n){F[e]=Object(d.a)(Object(d.a)({},F[e]),{},Object(j.a)({},t,n)),A(Object(b.a)(F))},J="".concat(Math.round(((z||Date.now()/1e3)-n-P)/P*100),"%");Object(c.useEffect)((function(){n&&!z&&setInterval((function(){M(Date.now()/1e3-n)}),1e3)}),[n,z]);var $=f(C),q=Object(c.createRef)(),G=Object(c.createRef)();return Object(m.jsx)("div",{className:"App",children:"undefined"===typeof n?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),k(G.current.value),r(Date.now()/1e3)},children:[Object(m.jsxs)("div",{className:"input-wrapper",children:[Object(m.jsx)("input",{placeholder:" ",name:"title",ref:G}),Object(m.jsx)("label",{children:"Roast Title"})]}),Object(m.jsx)("button",{className:"btn",type:"submit",children:"Start Roast"})]}),Object(m.jsx)("hr",{}),Object(m.jsx)("label",{children:"Upload CSV"}),Object(m.jsx)("input",{type:"file",class:"btn",onChange:function(){var e=Object(u.a)(s.a.mark((function e(t){var n,c,a,i,o,u,j,d,b,p,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t.target.files[0]);case 2:a=e.sent,i=atob(a.split("data:text/csv;base64,")[1]),o=i.split("\n").map((function(e){return e.split(",")})),u=Object(l.a)(o),j=u[0],d=u.slice(1),b=d.map((function(e){var t=e.map((function(e,t){return[j[t],e]}));return Object.fromEntries(t)})),p=b.filter((function(e){return e.Meta})),m=b.filter((function(e){return!e.Meta})),A(m.map((function(e){var t=e.Temperature,n=e.Time;return{time:h(n),temp:t}}))),B(h(null===(n=p.find((function(e){return"End Time"===e.Meta})))||void 0===n?void 0:n.Value)),V(h(null===(c=p.find((function(e){return"First Crack"===e.Meta})))||void 0===c?void 0:c.Value)),r(0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]}):Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:z?"End Time: ".concat(f(z-n)):"Current Time: ".concat($)}),Object(m.jsxs)("div",{className:"grid",children:[z?Object(m.jsx)("div",{children:"undefined"!==typeof o&&Object(m.jsx)("button",{className:"btn",type:"submit",onClick:function(){return function(){var e=[S.concat(["Meta","Value"]).join(","),["","","","First Crack",f(P)],["","","","End Time",f(z-n)],["","","","Development",J],F.map((function(e,t){var n=e.time,c=e.temp;return[f(n),c,0===t?"-":c-F[t-1].temp,"",""].join(",")})).join("\n")].join("\n"),t=document.createElement("a"),c="data:text/csv;charset=utf-8,"+encodeURIComponent(e);t.setAttribute("href",c),t.setAttribute("download","".concat(o,".csv")),document.body.appendChild(t),t.click(),t.remove()}()},children:"Export CSV"})}):Object(m.jsxs)("form",{className:"set-temp",onSubmit:function(e){var t;e.preventDefault(),t={time:30*F.length+30,temp:q.current.value},A([].concat(Object(b.a)(F),[t])),q.current.value=""},children:[Object(m.jsx)("h2",{children:"Temperature"}),Object(m.jsxs)("div",{className:"input-wrapper",children:[Object(m.jsx)("input",{placeholder:" ",id:"temp",ref:q,name:"temp",pattern:"^[0-9]+$",required:!0}),Object(m.jsxs)("label",{htmlFor:"temp",children:["Set Temperature at ",f(30*F.length+30)]})]}),Object(m.jsx)("button",{className:"btn",type:"submit",children:"Submit"})]}),Object(m.jsxs)("svg",{viewBox:"0 0 ".concat(v," ").concat(x),className:"chart",children:[new Array(14).fill().map((function(e,t){return Object(m.jsx)("polyline",{fill:"none",stroke:"#eee","stroke-width":"1",points:"".concat(v/15*(t+1)+1,",0\n                ").concat(v/15*(t+1)+1,",").concat(x)})})),new Array(14).fill().map((function(e,t){return Object(m.jsx)("polyline",{fill:"none",stroke:"#eee","stroke-width":"1",points:"0,".concat(x-33*t,"\n                  ").concat(v,",").concat(x-33*t)})})),Object(m.jsx)("polyline",{fill:"none",stroke:"red","stroke-width":"3",points:"\n"+F.map((function(e){var t=e.temp,n=e.time;return"".concat(v/15*(n/60),",").concat(t*w*-1+180*w+x)})).join("\n")}),Object(m.jsx)("polyline",{fill:"none",stroke:"blue","stroke-width":"3",points:"\n"+F.map((function(e,t){var n=e.temp,c=e.time,r=0===t?0:n-F[t-1].temp;return"".concat(v/15*(c/60),",").concat(12*r*-1+0+x)})).join("\n")}),new Array(y).fill(0).map((function(e,t){return Object(m.jsxs)("text",{x:"5",y:x-33*t+2.5,"font-size":"8",children:[Math.round(t*(260/9))+180,"F"]})})),new Array(y).fill(0).map((function(e,t){return Object(m.jsx)("text",{x:"480",y:x-33*t+2.5,"font-size":"8",children:Math.round(t*(25/9))})})),new Array(14).fill().map((function(e,t){return Object(m.jsx)("text",{x:v/15*(t+1),y:"300","font-size":"8",children:t+1})}))]}),Object(m.jsx)("div",{className:"table",children:Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsx)("tr",{children:S.map((function(e){return Object(m.jsx)("th",{children:e})}))})}),Object(m.jsx)("tbody",{children:F.map((function(e,t){var n=e.time,c=e.temp,r=e.editTemp;return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:f(n)}),Object(m.jsx)("td",{onMouseEnter:function(){return U(t,"editTemp",!0)},onMouseLeave:function(){return U(t,"editTemp",!1)},children:r?Object(m.jsx)("input",{onChange:function(e){/^[0-9]+$/.test(e.target.value)&&U(t,"temp",e.target.value)},value:c}):c}),Object(m.jsx)("td",{children:0===t?"-":c-F[t-1].temp})]})}))})]})}),Object(m.jsxs)("div",{className:"development",children:[Object(m.jsx)("h2",{children:"Development"}),P?Object(m.jsxs)("table",{children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"First Crack"}),Object(m.jsx)("th",{children:"Development Percent"})]})}),Object(m.jsx)("tbody",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:f(P)}),Object(m.jsx)("td",{children:J})]})}),!z&&Object(m.jsx)("button",{className:"btn",type:"button",onClick:function(){return B(Date.now()/1e3)},children:"STOP"})]}):Object(m.jsxs)("button",{className:"btn",type:"button",onClick:function(){return V(Date.now()/1e3-n)},children:["Set first crack at ",$]})]})]})]})})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(k,{})}),document.getElementById("root")),g()}},[[24,1,2]]]);
//# sourceMappingURL=main.25e06c7e.chunk.js.map